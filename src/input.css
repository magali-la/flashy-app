@import "tailwindcss";

/* -------------------------
   Global (flush layout + box-sizing)
   ------------------------- */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}
*, *::before, *::after {
  box-sizing: border-box;
}

/* -------------------------
   Design tokens (color / sizes)
   ------------------------- */
:root{
  --sidebar-width: 16rem; /* 256px */
  --gap: 1rem;
  --radius: 0.5rem;
  --bg: #ffffff;
  --panel: #f5f5f7;
  --text: #0f172a;
  --muted: #6b7280;
  --accent: #2563eb;
  --focus: rgba(37,99,235,0.28);
}

@media (prefers-color-scheme: dark){
  :root{
    --bg: #081224;
    --panel: #0b1a2b;
    --text: #e6eef8;
    --muted: #9aa8bf;
    --accent: #60a5fa;
    --focus: rgba(96,165,250,0.18);
  }
}

/* Desktop: bump sidebar width so left/right focus rings aren't clipped */
@media (min-width: 721px) {
  :root {
    --sidebar-width: 26rem; /* modest increase from 16rem */
  }
}

/* -------------------------
   Components
   ------------------------- */
@layer components {
  /* Sidebar / Header (fixed on wide screens) */
  .site-header{
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: var(--sidebar-width);
    z-index: 30;
  }

  .sidebar{
    background: var(--panel);
    border-radius: var(--radius);
    /* increased internal padding so left/right focus rings have room */
    padding: 1rem;
    height: 100%; /* fill the fixed header */
    box-shadow: 0 1px 0 rgba(0,0,0,0.03);
    display:flex;
    flex-direction:column;
    justify-content:flex-start;

    /* Fill the header area exactly (padding included because of global box-sizing) */
    width: 100%;
  }

  .sidebar-top{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:0.5rem;
    margin-bottom:0.5rem;
  }

  .sidebar-title{
    font-size: 1rem;
    margin:0;
    color:var(--text);
  }

  /* ---------------------------
     Deck list & items (spacing)
     - ensure focus outlines aren't clipped by adding
       padding on the container and breathing space on items
     --------------------------- */
  .deck-list{
    list-style:none;
    /* top/bottom padding so first/last items have space for focus ring */
    padding-block: 0.5rem;
    /* add horizontal padding so focus rings aren't clipped by the scroll container */
    padding-inline: 0.5rem;
    margin:0;
    display:flex;
    flex-direction:column;
    gap:0.5rem; /* slightly larger gap for breathing room */
    overflow:auto;
  }

  .deck-item{
    /* increased vertical padding and small vertical margin to avoid clipped focus */
    padding:0.625rem 0.875rem; /* slightly more horizontal padding */
    margin-block:0.125rem;
    border-radius:0.375rem;
    cursor:pointer;
    color:var(--text);
    background:transparent;
    font-size:0.95rem;

    /* ensure focus shadow appears above siblings and isn't affected by stacking */
    position:relative;
    z-index:1;

    /* add full width to span the sidebar and left align text nowthat it's a button */
    width: 100%;
    text-align: left;
  }

  .deck-item:hover,
  .deck-item:focus{
    background: rgba(0,0,0,0.04);
    outline: none;
    box-shadow: 0 0 0 4px var(--focus);
    border-radius:0.375rem;
  }

  /* Hero / Header-main (moved into main) */
  .header-main,
  .hero {
    background: transparent;
    padding: 0.375rem 0.5rem;
    max-width: 60rem;
  }

  /* Main content container (offset to the right of fixed sidebar) */
  .main-area{
    margin-left: var(--sidebar-width);
    padding: calc(var(--gap) * 1.25);
  }

  .main-content{
    margin-top: 1rem;
  }

  /* Buttons */
  .btn{
    background:var(--accent);
    color:var(--bg);
    border: none;
    padding: 0.5rem 0.75rem;
    border-radius:0.375rem;
    font-weight:600;
    cursor:pointer;
    display:inline-flex;
    align-items:center;
    justify-content:center;
  }

  .btn:hover{
    filter:brightness(0.98);
  }

  .new-deck{
    font-size:0.95rem;
    padding:0.375rem 0.625rem;
  }

  /* Focus styles (applies to .btn and .deck-item; kept generic for future anchors) */
  :where(.btn, .deck-item, a):focus-visible{
    box-shadow: 0 0 0 4px var(--focus);
    border-radius:0.375rem;
    outline: none;
  }
}

/* -------------------------
   Responsive
   - stack sidebar above main on small screens
   ------------------------- */
@media (max-width: 720px){
  .site-header{
    position: static;
    width: 100%;
    padding: 0.75rem;
  }

  .sidebar{
    height: auto;
    border-radius: var(--radius);
  }

  .main-area{
    margin-left: 0;
    padding: calc(var(--gap) * 1.25);
  }

  .deck-list{
    /* horizontal scroller but keep vertical breathing room */
    flex-direction:row;
    overflow:auto;
    gap:0.5rem;
    padding-block: 0.5rem;   /* keep vertical breathing room when horizontal */
    padding-inline: 0.5rem;  /* horizontal padding so edge items' focus rings aren't clipped */
  }

  .deck-item{
    white-space:nowrap;
    padding:0.375rem 0.625rem;
    margin-block:0.125rem;
  }
}
